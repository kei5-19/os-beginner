# 29日目

<!-- mtoc-start -->

- [1. 終了コード](#1-終了コード)
- [2. パイプ](#2-パイプ)
- [3. sort コマンド](#3-sort-コマンド)
- [4. ターミナルのバグ修正](#4-ターミナルのバグ修正)

<!-- mtoc-end -->

## 1. 終了コード

元々 `Terminal::execute_file()` は ExitCode を返すようにしていたので、ちょっと変更少なく済んだ。

## 2. パイプ

app-lib の標準入力を `app_lib::fs::File(0)` として返すことにした。
`drop()` がよばれたときにマズイなと思ったが、
mikan-os ではファイルクローズを実装してないので問題なかった。

## 3. sort コマンド

なんでこれわざわざ章立てされとるんやろう。

## 4. ターミナルのバグ修正

これずっと気になっていて原因が分かっていなかったが、教科書からあるバグらしく安心した。
ということで修正。
`cat` コマンドが遅いとのことだが、どこかで教科書と別の実装になったのか
こちらは別に遅くないので修正しない。
実際1文字ずつ描画に放っていないし。

ただリダイレクトしたときとかに入力したときに滅茶苦茶カーソルが飛ぶという謎のバグが発生した。
原因は `[u8]` から `&str` に変換するときにスライスを長くしすぎていたのが原因らしい。
ということでこれも修正。
