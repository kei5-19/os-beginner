# 24日目

<!-- mtoc-start -->

- [1. ターミナルを増やす](#1-ターミナルを増やす)
- [2. カーソル点滅を自分で](#2-カーソル点滅を自分で)
- [3. 複数アプリの同時起動](#3-複数アプリの同時起動)
- [4. ウィンドウの重なりのバグ修正](#4-ウィンドウの重なりのバグ修正)

<!-- mtoc-end -->

## 1. ターミナルを増やす

変更自体は簡単。
ただ、2つのターミナルで2つのアプリを実行すると、
2つのアプリが使うページが被っているためいろんな CPU 例外が発生する。
多分あとで CR3 を変更して動くようにするんやと思う。

## 2. カーソル点滅を自分で

特に言うことはない。

が、教科書の実装では点滅用のタイマーがアプリ起動中に来て、
そのアプリが `read_event()` システムコールを呼んでいるとタイマ通知が潰されてしまって
その後絶対に点滅しなくなる。
ということでこれでいいかは不明だが一応直した。

## 3. 複数アプリの同時起動

[23日目](./23.md) に言っていた CR3 変更来た。
最近やってきたやつの中で一番嬉しい。

ただ、`set_cr3()` 呼んでから `task.context.cr3` を変更するまでの間にタイマ割り込みで
コンテキストスイッチしたらマズイ気がするんやけど、割り込み禁止せんくて大丈夫なんやろうか。

## 4. ウィンドウの重なりのバグ修正

これは実は commit d2c6061869ccd51a9d7ebc5dfb03f3d1641f32b9 で修正している。
